:javascript
  $(document).ready(function() {
    $(".expense_tag").click(function() {
      var tags_so_far = $("#expense-tags").val().split(' ');
      var new_tag = $(this).html();
      if ( tags_so_far.indexOf(new_tag) == -1 ) {
        tags_so_far.push(new_tag);
        var new_tags = tags_so_far.join(' ').replace(/^\s+/, '').replace(/\s+$/, '');
        $("#expense-tags").val(new_tags);
      }
    });
  })

%h1= "New expense for #{current_user.name}"
%form{ :name => "create_expense", :method => "post", :action => "/expenses"}
  %ul.fieldset
    %li.field
      %label{ :for => 'expense-subject' } Subject
      %input{ :type => 'text', :id => 'expense-subject', :name => 'expense[subject]'}
    %li.field
      %label{ :for => 'expense-amount' } Amount
      %input{ :type => 'text', :id => 'expense-amount', :name => 'expense[amount]'}
    %li.field
      %label{ :for => 'expense-tags' } Tags
      %input{ :type => 'text', :id => 'expense-tags', :name => 'expense[tags]'}
    #tags
      = partial :tag, :collection => @tags
    %li.field
      %input{ :type => 'submit', :name => 'add_expense', :value => "Add expense" }

%a{ :href => "/expenses" } Go to expenses