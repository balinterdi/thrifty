:javascript
  $(document).ready(function() {
    $('.expense_tag').click(function() {
      $(this).toggleClass('selected_tag');
      var selected_tags = Array();
      $.each($('.selected_tag'), function() { selected_tags.push($(this).attr('id')); });
      $.get("/get_expenses", { "tags[]" : $.makeArray(selected_tags) }, function(data) {
        var total_amount = data.substring(0, data.indexOf(':'));
        var expenses_html = data.substring(data.indexOf(':') + 1);
        $('#total_amount').html(total_amount);
        $('#expenses').html(expenses_html);
      });
    });
  })

%h1= "Expenses for #{current_user.name}"
#tags
  - @tags.each do |t|
    .expense_tag{ :id => t.id }= t.name
    %input{ :type => "hidden", :id => "selected-tag-#{t.id}", :value => "0" }
%ul#expenses
  / = partial :expense, :collection => @expenses
#sum Total amount:
%span#total_amount 0